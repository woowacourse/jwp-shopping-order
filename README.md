# jwp-shopping-order

## step2

### Domain
- [ ] Order
  - [ ] 필드  
    - [ ] id
    - [ ] Member (회원 객체)
    - [ ] OrderInfos(OrderInfo 일급 콜렉션 객체)
    - [ ] originalPrice (할인 전 원가)
    - [ ] usedPoint (사용할 적립금)
    - [ ] pointToAdd (추가될 적립금)
    - [ ] finalPrice (최종 가격)
  - [ ] 모든 물품의 가격과 수량에 따른 최종 가격을 구한다.
    - [ ] 각 물품의 가격과 수량에 따른 가격들을 더한다.
    - [ ] 사용할 적립금만큼 가격을 뺀다.
  - [ ] 전부 더한 적립금과 프론트에서 보낸 pointToAdd가 같은 지 확인한다.

- [ ] Member
  - [ ] 사용할 적립금만큼 뺀다.
  - [ ] 적립될 적립금만큼 더한다.
  - [ ] 예외 처리
    - [ ] [제한 사항] 적립금 사용 시, '0 ~ 가지고 있는 적립금' 의 범위에 속해야 한다.
    - [ ] [제한 사항] 적립금 누적 시, 프론트가 보낸 적립금과 서버에서 계산된 적립금이 같아야 한다.

- [ ] OrderInfo
  - [ ] 필드 
    - [ ] id
    - [ ] Product (상품 객체)
    - [ ] name (샀을 당시의 상품 이름)
    - [ ] price (샀을 당시의 가격)
    - [ ] imageUrl (샀을 당시의 상품 이미지)
    - [ ] quantity (샀을 당시의 수량)
  - [ ] 물품 가격과 수량에 따른 가격을 구한다.

- [ ] Product
  - [ ] 포인트 적립금을 구한다.
    - [ ] 적립이 되는 상품이면 계산
    - [ ] 적립이 안되는 상품이면 0 반환

- [ ] Point
  - [ ] 필드
    - [ ] id
    - [ ] Member (회원 객체)
    - [ ] point (해당 회원의 현재 적립금)

### API
- [ ] 장바구니
  - [ ] 장바구니 아이템 목록을 조회한다.(기존 API 수정)
  - [ ] 장바구니에 담은 상품을 주문할 수 있다.
- [ ] 재화 관련 요소: 쿠폰, 포인트, 할인 등
  - [ ] 포인트(적립금)
    - [ ] 유저가 보유한 적립금을 요청한다.
    - [ ] 일정금액 이상 사용가능 (아직 안정함)
    - [ ] 상품별로 적립비율이 다르다
    - [ ] 예외 처리
      - [ ] [제한 사항] 최대 사용 가능한 적립금보다 사용하고자 하는 적립금이 클 수 없다.
        - 상품마다 최대 적립을 계산하고, 최대 사용 가능한 적립금을 도출함
        - 최대 사용 가능한 적립금보다 사용하고자 하는 적립금이 크다면 예외 케이스
  - [ ] 쿠폰
  - [ ] 할인
    - [ ] 예) 5만원 이상 주문 시 전체 금액에서 10% 할인이 된다.
- [ ] 사용자 별로 주문 목록을 확인할 수 있다.
- [ ] 특정 주문의 상세 정보를 확인할 수 있다.

- [ ] 예외 처리
  - [ ] 사용자 인증 정보가 잘못되었을 경우
    - HTTP/1.1 401 Unauthorized
  - [ ] 프론트엔드에서 계산한 금액과 실제 금액이 다른 경우
    - HTTP/1.1 409 Conflict
